generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  firstname String
  lastname  String
  email     String   @unique
  password  String
  role      String
  createdAt DateTime @default(now())
  defaultAt DateTime @default(now())
  profile   Profile?
}

model Profile {
  id              Int        @id @default(autoincrement())
  nombres         String
  apellidos       String
  cedula          String
  celular         String
  condicion       String
  fechaNacimiento String
  genero          String
  pais            String
  ciudad          String
  direccion       String
  userId          Int        @unique
  createdAt       DateTime   @default(now())
  defaultAt       DateTime   @default(now())
  user            User       @relation(fields: [userId], references: [id])
  registro        Registro[]
}

model Programacion {
  id            Int        @id @default(autoincrement())
  vigenciaDesde DateTime
  vigenciaHasta DateTime
  horaDesde     String
  horaHasta     String
  fechatope     String
  detalle       String
  estado        String
  cupo          Int
  actividadId   Int
  createdAt     DateTime   @default(now())
  defaultAt     DateTime   @default(now())
  actividad     Actividad  @relation(fields: [actividadId], references: [id])
  registro      Registro[]
}

model Actividad {
  id           Int            @id @default(autoincrement())
  descripcion  String
  precio       Int
  estado       String
  createdAt    DateTime       @default(now())
  defaultAt    DateTime       @default(now())
  programacion Programacion[]
}

model Registro {
  id             Int          @id @default(autoincrement())
  fecharegistro  String
  pagado         Boolean      @default(false)
  programacionId Int
  profileId      Int
  createdAt      DateTime     @default(now())
  defaultAt      DateTime     @default(now())
  profile        Profile      @relation(fields: [profileId], references: [id])
  programacion   Programacion @relation(fields: [programacionId], references: [id])
}
